import{_ as Vt,r as d,l as Ft,h as Nt,i as p,j as se,c as l,a as s,d as v,t as u,n as $,k as w,F as y,f as h,e as g,v as V,g as A,o,p as Rt,u as ge}from"./index-Dl1toHCS.js";import{d as Pt,f as jt,s as Et,a as qt}from"./docDisplay-CK9INdz_.js";const Bt={class:"dashboard-layout"},Ot={class:"navbar"},Ht={class:"user-info"},It={key:0},Wt={class:"main-container"},Gt={class:"sidebar"},Yt={class:"content"},zt={key:0,class:"card mb-30"},Jt={key:0,class:"loading-text"},Qt={key:1,class:"empty-state"},Zt={key:2,class:"review-list"},Kt={class:"info"},Xt={class:"student-name"},es={class:"file-link"},ts={key:0,class:"file-link"},ss={key:0,class:"muted"},as={class:"actions"},ls=["href"],os=["onClick","disabled"],ns={key:1,class:"stack"},is={class:"card mb-30"},us={key:0,class:"msg bad"},ds={class:"form-row"},rs=["value"],cs=["disabled"],vs={key:2,class:"empty-state"},ms={key:3,class:"table mt-20"},_s={class:"actions"},ps=["onClick","disabled"],fs=["onClick","disabled"],gs={class:"card"},ys={class:"form-row",style:{margin:"10px 0 6px"}},hs=["disabled"],bs={key:0,class:"empty-state"},ks={key:1,class:"table mt-20"},ws={key:2,class:"stack"},Cs={class:"card mb-30"},Ss={class:"form-grid"},$s={class:"form-group"},As={class:"form-group"},Ts={class:"form-group full"},xs={class:"form-group"},Ls=["disabled"],Ds={key:0,class:"form-group"},Us={key:0,class:"msg bad",style:{margin:"0 0 10px"}},Ms=["disabled"],Vs=["value"],Fs={key:1,class:"form-group full"},Ns=["value"],Rs={class:"form-group full"},Ps={class:"form-actions"},js=["disabled"],Es={class:"card mb-30"},qs={key:0,class:"loading-text"},Bs={key:1,class:"empty-state"},Os={key:2,class:"review-list"},Hs={class:"info"},Is={class:"student-name"},Ws={class:"file-link"},Gs={key:0},Ys={class:"file-link"},zs={class:"actions"},Js=["onClick"],Qs=["onClick"],Zs=["onClick"],Ks=["onClick"],Xs={key:0,class:"card"},ea={key:0,class:"msg bad"},ta={key:1,class:"loading-text"},sa={key:2,class:"review-list"},aa={class:"info"},la={class:"student-name"},oa={class:"file-link"},na={key:0},ia={key:0,class:"file-link"},ua={key:0},da={key:1,class:"muted"},ra={key:2,class:"muted"},ca={class:"actions"},va=["onClick"],ma=["onClick"],_a={key:2,class:"grade-box"},pa=["value","onInput","disabled"],fa=["onClick","disabled"],ga=["onClick","disabled"],ya={key:3,class:"card mb-30"},ha={class:"form-row",style:{margin:"10px 0 6px"}},ba=["value"],ka=["disabled"],wa={key:0,class:"empty-state"},Ca={key:1,class:"review-list"},Sa={class:"info"},$a={class:"student-name"},Aa={key:0,class:"muted"},Ta={class:"doc-meta-row"},xa={class:"doc-source-pill"},La={class:"doc-format-pill"},Da={key:0,class:"muted"},Ua={class:"actions"},Ma=["href"],Va=["onClick"],Fa={key:4,class:"stack"},Na={class:"card mb-30"},Ra={key:0,class:"loading-text"},Pa={key:1,class:"empty-state"},ja={key:2,class:"table"},Ea={class:"card"},qa={class:"form-row",style:{margin:"10px 0 6px"}},Ba=["disabled"],Oa={key:0,class:"loading-text"},Ha={key:1,class:"empty-state"},Ia={key:2,class:"table mt-20"},Wa={key:0,class:"muted"},Ga={key:1,class:"muted"},Ya={key:0,class:"actions"},za=["href"],Ja=["onClick"],Qa={key:1,class:"muted"},Za={key:5,class:"card"},Ka={key:0,class:"empty-state"},Xa={key:1,class:"review-list"},el={class:"info"},tl={class:"student-name"},sl={class:"email-text"},al={class:"actions"},ll=["onClick"],ol=["onClick"],nl={key:0,class:"modal-overlay"},il={class:"modal-box wide-modal"},ul={key:0,class:"comment-meta"},dl={class:"form-row",style:{margin:"6px 0 0"}},rl=["disabled"],cl={key:2,class:"loading-text"},vl={key:3,class:"empty-state"},ml={key:4,class:"table mt-20"},_l={key:0,class:"muted"},pl={key:1,class:"muted"},fl={key:1,class:"modal-overlay"},gl={class:"modal-box wide-modal"},yl={key:0,class:"comment-meta"},hl={class:"comment-list"},bl={key:0,class:"loading-text"},kl={key:1,class:"empty-state"},wl={key:2},Cl={class:"comment-head"},Sl={class:"comment-author"},$l={class:"comment-time"},Al={class:"comment-body"},Tl={class:"modal-actions"},xl=["disabled"],Ll={key:2,class:"modal-overlay"},Dl={class:"modal-box wide-modal"},Ul={key:0,class:"comment-meta"},Ml={class:"comment-list"},Vl={key:0,class:"loading-text"},Fl={key:1,class:"empty-state"},Nl={key:2},Rl={class:"comment-head"},Pl={class:"comment-author"},jl={class:"comment-time"},El={class:"comment-body"},ql={class:"modal-actions"},Bl=["disabled"],Ol={key:3,class:"modal-overlay"},Hl={class:"modal-box wide-modal"},Il={key:1,class:"form-grid"},Wl={class:"form-group full"},Gl={class:"form-group full"},Yl={class:"form-group"},zl={class:"form-group"},Jl=["disabled"],Ql={key:0,class:"form-group"},Zl=["value"],Kl={key:1,class:"form-group"},Xl=["disabled"],eo=["value"],to={key:2,class:"form-group full"},so=["value"],ao={class:"modal-actions"},lo=["disabled"],oo=["disabled"],no={__name:"FacultyDashboardView",setup(io){const ye=Nt(),ae=d({}),b=d("research"),he=d([]),be=d([]),ke=d(!0),we=d([]),le=d(""),Ce=d([]),j=d(!0),F=d([]),_=d({title:"",description:"",due_at:"",target_mode:"all",course_code:""}),G=d([]),oe=d(null),ne=d(!1),U=d(""),M=d(!0),Se=d(!1),ie=d([]),T=d(null),$e=d(!1),Y=d([]),E=d({}),q=d(""),N=d(""),B=d(!0),z=d(""),Ae=d(!1),c=d(null),J=d(!1),C=d(""),S=d(!0),Te=d(!1),x=d(null),Q=d([]),xe=d(!1),R=d(""),ue=d(!1),Le=d(!0),De=d([]),Ue=d([]),Me=d(""),He=d([]),O=d(""),L=d(!1),Z=d(""),K=d(!0),Ve=d(!1),H=d(""),de=d([]),re=d(!1),I=d(""),W=d(!0),X=d(""),Fe=d(!1),Ne=d([]),ce=d(!1),Ie=d([]),Re=d(""),Pe=d(""),je=d(""),Ee=d(!1),D=d(null),ee=d([]),qe=d(!1),P=d(""),ve=d(!1);Ft(()=>{const a=localStorage.getItem("user");if(a){if(ae.value=JSON.parse(a),ae.value.role!=="faculty")return ye.push("/dashboard");Ge(),Ye(),ze(),ct(),pe(),me(),vt(),Je()}else ye.push("/")});const Be=a=>`${Rt}/download_document.php?doc_id=${a.doc_id}`,We=a=>{const t=URL.createObjectURL(a);window.open(t,"_blank","noopener,noreferrer"),setTimeout(()=>URL.revokeObjectURL(t),6e4)},Ge=async()=>{try{const a=await p.get("faculty_get_mp_requests.php");a.data.status==="success"&&(he.value=a.data.data)}catch(a){console.error(a)}},Ye=async()=>{try{const a=await p.get("faculty_get_advisee_documents.php");a.data.status==="success"&&(be.value=a.data.data||[])}catch(a){console.error(a)}},ze=async()=>{var a;ke.value=!0;try{const t=await p.get("faculty_get_research_method_holds.php");((a=t.data)==null?void 0:a.status)==="success"&&(we.value=t.data.data||[])}catch(t){console.error(t)}finally{ke.value=!1}},it=async()=>{var a;Fe.value=!0;try{const t=await p.get("defense_windows_list.php");((a=t.data)==null?void 0:a.status)==="success"&&(Ne.value=t.data.data||[])}catch(t){console.error(t)}finally{Fe.value=!1}},Je=async()=>{var a;ce.value=!0;try{await it();const t=await p.get("faculty_get_thesis_projects.php");((a=t.data)==null?void 0:a.status)==="success"&&(Ie.value=t.data.data||[])}catch(t){console.error(t)}finally{ce.value=!1}},Qe=se(()=>{const a=(Re.value||"").trim().toLowerCase(),t=Ie.value||[];return a?t.filter(e=>[e.student_id,e.student_username,e.student_email,e.first_name,e.last_name,e.title,e.type,e.submission_date,e.defense_date].map(n=>String(n||"").toLowerCase()).join(" ").includes(a)):t}),ut=se(()=>{const a=(be.value||[]).map(t=>String(t.entry_term_code||"").trim()).filter(t=>t!=="");return Array.from(new Set(a)).sort((t,e)=>e.localeCompare(t))}),Ze=se(()=>{const a=(Pe.value||"").trim().toLowerCase(),t=(je.value||"").trim().toUpperCase();return(be.value||[]).filter(i=>t&&String(i.entry_term_code||"").toUpperCase()!==t?!1:a?[i.student_id,i.student_username,i.student_email,i.first_name,i.last_name,i.entry_term_code,i.doc_type,i.status,i.file_path].map(r=>String(r||"").toLowerCase()).join(" ").includes(a):!0)}),dt=async a=>{a!=null&&a.thesis_doc_id&&await Oe({doc_id:a.thesis_doc_id,student_id:a.student_id,student_username:a.student_username,doc_type:"thesis_project",file_path:a.thesis_file_path,status:a.thesis_doc_status})},rt=async a=>{var t,e,i,n;le.value=String(a.student_id);try{const r=await p.post("faculty_lift_research_method_hold.php",{student_id:a.student_id});((t=r.data)==null?void 0:t.status)==="success"?(alert(`Hold lifted. Registrar code: ${r.data.registrar_code||"(none)"}`),await ze()):alert(((e=r.data)==null?void 0:e.message)||"Lift failed")}catch(r){alert(((n=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:n.message)||"Network Error")}finally{le.value=""}},ct=async()=>{var a;try{const t=await p.get("faculty_assignment_options.php");((a=t.data)==null?void 0:a.status)==="success"&&(j.value=!!t.data.courses_enabled,F.value=t.data.courses||[],Ce.value=t.data.students||[])}catch(t){console.error(t)}},vt=async()=>{var a;try{const t=await p.get("get_courses.php");((a=t.data)==null?void 0:a.status)==="success"&&(He.value=t.data.data||[])}catch{}},me=async()=>{var a,t,e,i;Z.value="",K.value=!0;try{const n=await p.get("faculty_get_overview.php");((a=n.data)==null?void 0:a.status)==="success"?(Le.value=!!n.data.faculty_courses_enabled,De.value=n.data.taught_courses||[],Ue.value=n.data.advisees||[]):(K.value=!1,Z.value=((t=n.data)==null?void 0:t.message)||"Failed to load overview.")}catch(n){K.value=!1,Z.value=((i=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:i.message)||"Failed to load overview."}},_e=a=>{const t=String((a==null?void 0:a.first_name)||"").trim(),e=String((a==null?void 0:a.last_name)||"").trim();return`${t} ${e}`.trim()||(a==null?void 0:a.student_username)||"Student"},Ke=se(()=>{const a=Me.value.trim().toLowerCase(),t=Array.isArray(Ue.value)?[...Ue.value]:[],e=n=>a?[_e(n),n==null?void 0:n.student_username,n==null?void 0:n.student_email,String((n==null?void 0:n.student_id)??""),n==null?void 0:n.entry_term_code,n==null?void 0:n.mp_status].filter(Boolean).join(" ").toLowerCase().includes(a):!0,i=n=>{const r=String((n==null?void 0:n.first_name)||"").trim(),m=String((n==null?void 0:n.student_username)||"").trim();return(r||m).charAt(0).toUpperCase()||"Z"};return t.filter(e).sort((n,r)=>{const m=i(n),f=i(r);return m!==f?m.localeCompare(f):_e(n).localeCompare(_e(r))})}),mt=async()=>{var a,t,e,i;if(O.value){L.value=!0;try{const n=await p.post("faculty_add_teaching_course.php",{course_code:O.value});((a=n.data)==null?void 0:a.status)==="success"?(O.value="",await me()):alert(((t=n.data)==null?void 0:t.message)||"Failed")}catch(n){alert(((i=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:i.message)||"Failed")}finally{L.value=!1}}},_t=async a=>{var t,e,i,n;L.value=!0;try{const r=await p.post("faculty_remove_teaching_course.php",{course_code:a});((t=r.data)==null?void 0:t.status)==="success"?await me():alert(((e=r.data)==null?void 0:e.message)||"Failed")}catch(r){alert(((n=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed")}finally{L.value=!1}},pt=a=>{const t=String((a==null?void 0:a.first_name)||"").trim(),e=String((a==null?void 0:a.last_name)||"").trim();return`${t} ${e}`.trim()||(a==null?void 0:a.username)||"Student"},Xe=se(()=>{const a=(X.value||"").trim().toLowerCase(),t=de.value||[];return a?t.filter(e=>[e.username,e.email,e.first_name,e.last_name,e.entry_term_code,String(e.term_number??"")].map(n=>String(n||"").toLowerCase()).join(" ").includes(a)):t}),et=async()=>{var a,t,e,i;if(H.value){re.value=!0,I.value="",W.value=!0;try{const n=await p.get(`faculty_get_course_students.php?course_code=${encodeURIComponent(H.value)}`);((a=n.data)==null?void 0:a.status)==="success"?de.value=n.data.data||[]:(W.value=!1,I.value=((t=n.data)==null?void 0:t.message)||"Failed to load students.")}catch(n){W.value=!1,I.value=((i=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:i.message)||"Failed to load students."}finally{re.value=!1}}},ft=async a=>{H.value=String((a==null?void 0:a.course_code)||""),de.value=[],X.value="",Ve.value=!0,await et()},gt=()=>{Ve.value=!1,H.value="",de.value=[],X.value="",I.value="",W.value=!0},pe=async()=>{var a;Se.value=!0;try{const t=await p.get("faculty_list_assignments.php");((a=t.data)==null?void 0:a.status)==="success"&&(ie.value=t.data.data||[])}catch(t){console.error(t)}finally{Se.value=!1}},yt=a=>{var t,e;oe.value=((e=(t=a==null?void 0:a.target)==null?void 0:t.files)==null?void 0:e[0])??null},ht=async()=>{var a,t,e,i;if(U.value="",M.value=!0,!_.value.title.trim()){M.value=!1,U.value="Title is required.";return}if(_.value.target_mode==="course"&&!_.value.course_code){M.value=!1,U.value="Please select a course.";return}if(_.value.target_mode==="students"&&G.value.length===0){M.value=!1,U.value="Please select at least one student.";return}ne.value=!0;try{const n=new FormData;n.append("title",_.value.title),n.append("description",_.value.description||""),n.append("due_at",_.value.due_at||""),n.append("target_mode",_.value.target_mode),n.append("course_code",_.value.course_code||""),n.append("student_ids",JSON.stringify(G.value)),oe.value&&n.append("file",oe.value);const r=await p.post("faculty_create_assignment.php",n);((a=r.data)==null?void 0:a.status)==="success"?(M.value=!0,U.value="Assignment published.",_.value.title="",_.value.description="",_.value.due_at="",_.value.target_mode="all",_.value.course_code="",G.value=[],oe.value=null,await pe()):(M.value=!1,U.value=((t=r.data)==null?void 0:t.message)||"Create failed.")}catch(n){M.value=!1,U.value=((i=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:i.message)||"Create failed."}finally{ne.value=!1}},bt=a=>{var r,m;const t=a||[];if(t.some(f=>f.target_type==="all"))return"Target: All students";const e=(r=t.find(f=>f.target_type==="course"))==null?void 0:r.target_value;if(e)return`Target: Course ${e}`;const i=(m=t.find(f=>f.target_type==="cohort"))==null?void 0:m.target_value;return i?`Target: Cohort ${i}`:`Target: ${t.filter(f=>f.target_type==="student").length} student(s)`},tt=async a=>{var t,e,i;T.value=a,Y.value=[],E.value={},N.value="",z.value="",$e.value=!0;try{const n=await p.get(`faculty_get_assignment_submissions.php?assignment_id=${a.id}`);if(((t=n.data)==null?void 0:t.status)==="success"){Y.value=n.data.data||[];const r={};for(const m of Y.value)m.submission_id&&(r[m.submission_id]=m.grade??"");E.value=r}}catch(n){z.value=((i=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:i.message)||"Failed to load submissions"}finally{$e.value=!1}},kt=a=>{if(!a)return"";const t=String(a).trim();return t?t.includes("T")?t.slice(0,16):t.includes(" ")?t.replace(" ","T").slice(0,16):t:""},wt=a=>{var m,f;C.value="",S.value=!0;const t=a.targets||[];let e="all",i="",n="",r=[];t.some(k=>k.target_type==="all")?e="all":t.some(k=>k.target_type==="course")?(e="course",i=((m=t.find(k=>k.target_type==="course"))==null?void 0:m.target_value)||""):t.some(k=>k.target_type==="cohort")?(e="cohort",n=((f=t.find(k=>k.target_type==="cohort"))==null?void 0:f.target_value)||""):(e="students",r=t.filter(k=>k.target_type==="student").map(k=>String(k.target_value||"")).filter(Boolean)),c.value={assignment_id:a.id,title:a.title||"",description:a.description||"",due_at:kt(a.due_at),target_mode:e,course_code:i,cohort_term_code:n,student_ids:r},Ae.value=!0},st=()=>{Ae.value=!1,c.value=null,C.value="",S.value=!0},Ct=async()=>{var t,e,i,n,r;if(!c.value)return;if(C.value="",S.value=!0,!(c.value.title||"").trim()){S.value=!1,C.value="Title is required.";return}if(c.value.target_mode==="course"&&!c.value.course_code){S.value=!1,C.value="Please select a course.";return}if(c.value.target_mode==="cohort"&&!c.value.cohort_term_code){S.value=!1,C.value="Missing cohort term code (legacy). Please switch target to Course or Students.";return}if(c.value.target_mode==="students"&&(!c.value.student_ids||c.value.student_ids.length===0)){S.value=!1,C.value="Please select at least one student.";return}J.value=!0;try{const m=await p.post("faculty_update_assignment.php",{assignment_id:c.value.assignment_id,title:c.value.title,description:c.value.description,due_at:c.value.due_at||"",target_mode:c.value.target_mode,course_code:c.value.course_code||"",cohort_term_code:c.value.cohort_term_code||"",student_ids:c.value.student_ids||[]});((t=m.data)==null?void 0:t.status)==="success"?(S.value=!0,C.value=((e=m.data)==null?void 0:e.message)||"Saved.",await pe(),T.value&&T.value.id===c.value.assignment_id&&(T.value=ie.value.find(f=>f.id===c.value.assignment_id)||T.value),st()):(S.value=!1,C.value=((i=m.data)==null?void 0:i.message)||"Save failed.")}catch(m){S.value=!1,C.value=((r=(n=m==null?void 0:m.response)==null?void 0:n.data)==null?void 0:r.message)||"Save failed."}finally{J.value=!1}},St=async a=>{var t,e,i,n,r;if(confirm(`Delete assignment "${a.title}" (#${a.id})? This will also delete submissions.`))try{const m=await p.post("faculty_delete_assignment.php",{assignment_id:a.id});((t=m.data)==null?void 0:t.status)==="success"?(await pe(),((e=T.value)==null?void 0:e.id)===a.id&&(T.value=null,Y.value=[],z.value="")):alert(((i=m.data)==null?void 0:i.message)||"Delete failed")}catch(m){alert(((r=(n=m==null?void 0:m.response)==null?void 0:n.data)==null?void 0:r.message)||"Delete failed")}},at=(a,t)=>{E.value={...E.value,[a]:t}},lt=async a=>{var t,e,i,n,r,m;if(a!=null&&a.submission_id){q.value=String(a.submission_id),N.value="",B.value=!0;try{const f=(t=E.value)==null?void 0:t[a.submission_id],k={submission_id:a.submission_id,grade:f===""?null:f},te=await p.post("faculty_grade_assignment_submission.php",k);((e=te.data)==null?void 0:e.status)==="success"?(N.value=((i=te.data)==null?void 0:i.message)||"Saved.",B.value=!0,a.grade=te.data.grade,a.graded_at=te.data.graded_at??null):(N.value=((n=te.data)==null?void 0:n.message)||"Save failed.",B.value=!1)}catch(f){N.value=((m=(r=f==null?void 0:f.response)==null?void 0:r.data)==null?void 0:m.message)||"Save failed.",B.value=!1}finally{q.value=""}}},$t=async a=>{a!=null&&a.submission_id&&(at(a.submission_id,""),await lt(a))},At=async a=>{try{const t=await p.get(`download_assignment_file.php?assignment_id=${a.id}`,{responseType:"blob"});We(t.data)}catch{alert("Download failed")}},Tt=async a=>{if(a.submission_id)try{const t=await p.get(`download_assignment_submission.php?submission_id=${a.submission_id}`,{responseType:"blob"});We(t.data)}catch{alert("Download failed")}},ot=async a=>{var t;x.value=a,Te.value=!0,R.value="",Q.value=[],xe.value=!0;try{const e=await p.get(`assignment_submission_comments_list.php?submission_id=${a.submission_id}`);((t=e.data)==null?void 0:t.status)==="success"&&(Q.value=e.data.data||[])}finally{xe.value=!1}},xt=()=>{Te.value=!1,x.value=null,Q.value=[],R.value=""},Lt=async()=>{var a,t,e,i,n;if((a=x.value)!=null&&a.submission_id){ue.value=!0;try{const r=await p.post("faculty_add_submission_comment.php",{submission_id:x.value.submission_id,comment:R.value});((t=r.data)==null?void 0:t.status)==="success"?(R.value="",await ot(x.value),await tt(T.value)):alert(((e=r.data)==null?void 0:e.message)||"Failed to post comment")}catch(r){alert(((n=(i=r==null?void 0:r.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to post comment")}finally{ue.value=!1}}},fe=a=>`${a.first_name||""} ${a.last_name||""}`.trim()||a.student_username||"Student",nt=async(a,t)=>{if(confirm(`Are you sure you want to ${t.toUpperCase()} ${fe(a)}?`))try{const e=await p.post("faculty_respond_mp.php",{student_id:a.student_id,action:t});e.data.status==="success"?(alert("Success: "+e.data.message),Ge()):alert(e.data.message||"Failed")}catch{alert("Network Error")}},Oe=async a=>{var t,e;D.value=a,Ee.value=!0,P.value="",ee.value=[],qe.value=!0;try{const i=await p.get(`document_comments_list.php?doc_id=${a.doc_id}`);i.data.status==="success"?ee.value=i.data.data||[]:alert(i.data.message||"Failed to load comments")}catch(i){alert(((e=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to load comments")}finally{qe.value=!1}},Dt=()=>{Ee.value=!1,D.value=null,ee.value=[],P.value=""},Ut=async()=>{var a,t;if(D.value){ve.value=!0;try{const e=await p.post("document_comments_add.php",{doc_id:D.value.doc_id,comment:P.value});e.data.status==="success"?(P.value="",await Oe(D.value)):alert(e.data.message||"Failed to post comment")}catch(e){alert(((t=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to post comment")}finally{ve.value=!1}}},Mt=async()=>{try{await p.post("logout.php")}catch{}localStorage.removeItem("user"),ye.push("/")};return(a,t)=>(o(),l("div",Bt,[s("header",Ot,[t[26]||(t[26]=s("div",{class:"brand"},"Grad System (Faculty Portal)",-1)),s("div",Ht,[ae.value.username?(o(),l("span",It,"Prof. "+u(ae.value.username),1)):v("",!0),s("button",{onClick:Mt,class:"btn-logout"},"Logout")])]),s("div",Wt,[s("aside",Gt,[s("nav",null,[s("ul",null,[s("li",{class:$({active:b.value==="research"}),onClick:t[0]||(t[0]=e=>b.value="research")},"Research Hold",2),s("li",{class:$({active:b.value==="overview"}),onClick:t[1]||(t[1]=e=>b.value="overview")},"My Teaching",2),s("li",{class:$({active:b.value==="assignments"}),onClick:t[2]||(t[2]=e=>b.value="assignments")},"Assignments",2),s("li",{class:$({active:b.value==="docs"}),onClick:t[3]||(t[3]=e=>b.value="docs")},"Advisee Docs",2),s("li",{class:$({active:b.value==="thesis"}),onClick:t[4]||(t[4]=e=>b.value="thesis")},"Thesis / Project",2),s("li",{class:$({active:b.value==="mp"}),onClick:t[5]||(t[5]=e=>b.value="mp")},"MP Requests",2)])])]),s("main",Yt,[b.value==="research"?(o(),l("div",zt,[t[28]||(t[28]=s("h2",null,"Research Method Hold Check (Term 3)",-1)),t[29]||(t[29]=s("p",{class:"subtitle"},[w(" You can lift the "),s("strong",null,"research_method"),w(" hold only after the student has registered/taken the Research Method course. ")],-1)),ke.value?(o(),l("div",Jt,"Loading...")):we.value.length===0?(o(),l("div",Qt,"No active research_method holds for your advisees.")):(o(),l("div",Zt,[(o(!0),l(y,null,h(we.value,e=>(o(),l("div",{key:`${e.student_id}-${e.term_code||""}`,class:"review-item"},[s("div",Kt,[s("span",Xt,u(e.student_username||`#${e.student_id}`),1),s("span",es,[w(" Hold: research_method · Term: "+u(e.term_code||"-")+" · Research Method: ",1),s("strong",null,u(Number(e.has_research_method)?"YES":"NO"),1)]),e.proof_doc_id?(o(),l("span",ts,[t[27]||(t[27]=w(" Proof uploaded: ",-1)),s("strong",null,u(String(e.proof_status||"pending")),1),e.proof_upload_date?(o(),l("span",ss," · "+u(e.proof_upload_date),1)):v("",!0)])):v("",!0)]),s("div",as,[e.proof_doc_id?(o(),l("a",{key:0,href:Be({doc_id:e.proof_doc_id}),target:"_blank",class:"btn-view"},"View Proof",8,ls)):v("",!0),s("button",{class:"btn-approve",onClick:i=>rt(e),disabled:!Number(e.has_research_method)||le.value===String(e.student_id)},u(le.value===String(e.student_id)?"Working...":"Lift Hold"),9,os)])]))),128))]))])):b.value==="overview"?(o(),l("div",ns,[s("div",is,[t[33]||(t[33]=s("h2",null,"My Teaching Courses",-1)),Le.value?Z.value?(o(),l("div",{key:1,class:$(["msg",{ok:K.value,bad:!K.value}])},u(Z.value),3)):v("",!0):(o(),l("div",us,[...t[30]||(t[30]=[w(" Teaching courses table not found. Run ",-1),s("code",null,"backend/sql/10_faculty_courses.sql",-1),w(" in MySQL. ",-1)])])),s("div",ds,[g(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>O.value=e),class:"select"},[t[31]||(t[31]=s("option",{disabled:"",value:""},"-- Select a course to add --",-1)),(o(!0),l(y,null,h(He.value,e=>(o(),l("option",{key:e.course_code,value:e.course_code},u(e.course_code)+" · "+u(e.course_name)+" ("+u(e.credits)+") ",9,rs))),128))],512),[[V,O.value]]),s("button",{class:"btn-approve",onClick:mt,disabled:!O.value||!Le.value||L.value},u(L.value?"Working...":"Add"),9,cs)]),De.value.length===0?(o(),l("div",vs,"No courses added.")):(o(),l("div",ms,[t[32]||(t[32]=s("div",{class:"row header"},[s("div",null,"Course"),s("div",null,"Name"),s("div",null,"Credits"),s("div")],-1)),(o(!0),l(y,null,h(De.value,e=>(o(),l("div",{key:e.course_code,class:"row"},[s("div",null,[s("strong",null,u(e.course_code),1)]),s("div",null,u(e.course_name||"-"),1),s("div",null,u(e.credits||"-"),1),s("div",_s,[s("button",{class:"btn-view",onClick:i=>ft(e),disabled:L.value},"Students",8,ps),s("button",{class:"btn-reject",onClick:i=>_t(e.course_code),disabled:L.value},"Remove",8,fs)])]))),128))]))]),s("div",gs,[t[35]||(t[35]=s("h2",null,"My Advisees",-1)),s("div",ys,[g(s("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>Me.value=e),class:"select",type:"text",placeholder:"Search by name / username / email / id..."},null,512),[[A,Me.value]]),s("button",{class:"btn-view",onClick:me,disabled:L.value},"Refresh",8,hs)]),Ke.value.length===0?(o(),l("div",bs,"No advisees found.")):(o(),l("div",ks,[t[34]||(t[34]=s("div",{class:"row header"},[s("div",null,"Student"),s("div",null,"Email"),s("div",null,"Cohort"),s("div",null,"Status")],-1)),(o(!0),l(y,null,h(Ke.value,e=>(o(),l("div",{key:e.student_id,class:"row"},[s("div",null,[s("strong",null,u(_e(e)),1)]),s("div",null,u(e.student_email||"-"),1),s("div",null,u(e.entry_term_code||"-"),1),s("div",null,u(e.mp_status),1)]))),128))]))])])):b.value==="assignments"?(o(),l("div",ws,[s("div",Cs,[t[48]||(t[48]=s("h2",null,"Create Assignment",-1)),s("div",Ss,[s("div",$s,[t[36]||(t[36]=s("label",null,"Title",-1)),g(s("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>_.value.title=e),type:"text",placeholder:"e.g. HW1: Reading Summary"},null,512),[[A,_.value.title]])]),s("div",As,[t[37]||(t[37]=s("label",null,"Due (optional)",-1)),g(s("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>_.value.due_at=e),type:"datetime-local"},null,512),[[A,_.value.due_at]])]),s("div",Ts,[t[38]||(t[38]=s("label",null,"Description (optional)",-1)),g(s("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>_.value.description=e),rows:"4",placeholder:"Details..."},null,512),[[A,_.value.description]])]),s("div",xs,[t[41]||(t[41]=s("label",null,"Target",-1)),g(s("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>_.value.target_mode=e)},[t[39]||(t[39]=s("option",{value:"all"},"All Students",-1)),s("option",{value:"course",disabled:!j.value||F.value.length===0},"Course",8,Ls),t[40]||(t[40]=s("option",{value:"students"},"Selected Students",-1))],512),[[V,_.value.target_mode]])]),_.value.target_mode==="course"?(o(),l("div",Ds,[t[44]||(t[44]=s("label",null,"Course",-1)),j.value?v("",!0):(o(),l("div",Us,[...t[42]||(t[42]=[w(" Teaching courses table not found. Add courses in ",-1),s("strong",null,"My Teaching",-1),w(" first. ",-1)])])),g(s("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>_.value.course_code=e),disabled:!j.value||F.value.length===0},[t[43]||(t[43]=s("option",{disabled:"",value:""},"-- Select Course --",-1)),(o(!0),l(y,null,h(F.value,e=>(o(),l("option",{key:e.course_code,value:e.course_code},u(e.course_code)+u(e.course_name?` · ${e.course_name}`:""),9,Vs))),128))],8,Ms),[[V,_.value.course_code]])])):v("",!0),_.value.target_mode==="students"?(o(),l("div",Fs,[t[45]||(t[45]=s("label",null,"Students",-1)),g(s("select",{"onUpdate:modelValue":t[13]||(t[13]=e=>G.value=e),multiple:"",class:"multi"},[(o(!0),l(y,null,h(Ce.value,e=>(o(),l("option",{key:e.student_id,value:String(e.student_id)},u(e.username)+" "+u(e.entry_term_code?`· ${e.entry_term_code}`:""),9,Ns))),128))],512),[[V,G.value]]),t[46]||(t[46]=s("div",{class:"hint"},"Hold Ctrl/Cmd to select multiple.",-1))])):v("",!0),s("div",Rs,[t[47]||(t[47]=s("label",null,"Attachment (optional)",-1)),s("input",{type:"file",onChange:yt},null,32)])]),s("div",Ps,[s("button",{class:"btn-approve",onClick:ht,disabled:ne.value},u(ne.value?"Creating...":"Publish Assignment"),9,js)]),U.value?(o(),l("div",{key:0,class:$(["msg",{ok:M.value,bad:!M.value}])},u(U.value),3)):v("",!0)]),s("div",Es,[t[50]||(t[50]=s("h2",null,"My Assignments",-1)),Se.value?(o(),l("div",qs,"Loading...")):ie.value.length===0?(o(),l("div",Bs,"No assignments yet.")):(o(),l("div",Os,[(o(!0),l(y,null,h(ie.value,e=>(o(),l("div",{key:e.id,class:"review-item"},[s("div",Hs,[s("span",Is,u(e.title),1),s("span",Ws,[w(" Created: "+u(e.created_at)+" ",1),e.due_at?(o(),l("span",Gs,"· Due: "+u(e.due_at),1)):v("",!0),t[49]||(t[49]=w(" · Submissions: ",-1)),s("strong",null,u(e.submissions_count),1)]),s("span",Ys,u(bt(e.targets)),1)]),s("div",zs,[s("button",{class:"btn-view",onClick:i=>tt(e)},"View",8,Js),e.attachment_path?(o(),l("button",{key:0,class:"btn-view",onClick:i=>At(e)},"Attachment",8,Qs)):v("",!0),s("button",{class:"btn-view",onClick:i=>wt(e)},"Edit",8,Zs),s("button",{class:"btn-reject",onClick:i=>St(e)},"Delete",8,Ks)])]))),128))]))]),T.value?(o(),l("div",Xs,[s("h2",null,"Submissions · "+u(T.value.title),1),z.value?(o(),l("div",ea,u(z.value),1)):v("",!0),$e.value?(o(),l("div",ta,"Loading submissions...")):(o(),l("div",sa,[(o(!0),l(y,null,h(Y.value,e=>(o(),l("div",{key:e.student_id,class:"review-item"},[s("div",aa,[s("span",la,u(fe(e)),1),s("span",oa,[w(u(e.submission_id?`Submitted: ${e.submitted_at}`:"Not submitted yet.")+" ",1),e.entry_term_code?(o(),l("span",na,"· Cohort: "+u(e.entry_term_code),1)):v("",!0)]),e.submission_id?(o(),l("span",ia,[t[51]||(t[51]=w(" Grade: ",-1)),e.grade!==null&&e.grade!==void 0?(o(),l("strong",ua,u(e.grade),1)):(o(),l("span",da,"-")),e.graded_at?(o(),l("span",ra," · graded_at: "+u(e.graded_at),1)):v("",!0)])):v("",!0)]),s("div",ca,[e.submission_id?(o(),l("button",{key:0,class:"btn-view",onClick:i=>Tt(e)},"Download",8,va)):v("",!0),e.submission_id?(o(),l("button",{key:1,class:"btn-view",onClick:i=>ot(e)}," Comments ("+u(Number(e.comments_count||0))+") ",9,ma)):v("",!0),e.submission_id?(o(),l("div",_a,[s("input",{class:"grade-input",type:"number",min:"0",max:"100",step:"0.01",value:E.value[e.submission_id]??"",placeholder:"0-100",onInput:i=>{var n;return at(e.submission_id,(n=i==null?void 0:i.target)==null?void 0:n.value)},disabled:q.value===String(e.submission_id)},null,40,pa),s("button",{class:"btn-approve",onClick:i=>lt(e),disabled:q.value===String(e.submission_id)},u(q.value===String(e.submission_id)?"Saving...":"Save"),9,fa),s("button",{class:"btn-reject",onClick:i=>$t(e),disabled:q.value===String(e.submission_id)}," Clear ",8,ga)])):v("",!0)])]))),128))])),N.value?(o(),l("div",{key:3,class:$(["msg",{ok:B.value,bad:!B.value}])},u(N.value),3)):v("",!0)])):v("",!0)])):b.value==="docs"?(o(),l("div",ya,[t[53]||(t[53]=s("h2",null,"My Advisee Documents",-1)),t[54]||(t[54]=s("p",{class:"subtitle"},"Documents submitted by students who selected you as their Major Professor.",-1)),s("div",ha,[g(s("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>Pe.value=e),class:"select",type:"text",placeholder:"Search by name / username / email / id..."},null,512),[[A,Pe.value]]),g(s("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>je.value=e),class:"select",style:{"min-width":"220px"}},[t[52]||(t[52]=s("option",{value:""},"All terms",-1)),(o(!0),l(y,null,h(ut.value,e=>(o(),l("option",{key:e,value:e},u(e),9,ba))),128))],512),[[V,je.value]]),s("button",{class:"btn-view",onClick:Ye,disabled:L.value},"Refresh",8,ka)]),Ze.value.length===0?(o(),l("div",wa,"No advisee documents.")):(o(),l("div",Ca,[(o(!0),l(y,null,h(Ze.value,e=>(o(),l("div",{key:e.doc_id,class:"review-item"},[s("div",Sa,[s("span",$a,[w(u(fe(e))+" ",1),e.entry_term_code?(o(),l("span",Aa,"· "+u(e.entry_term_code),1)):v("",!0)]),s("div",Ta,[s("span",xa,u(ge(Pt)(e.doc_type)),1),s("span",La,u(ge(jt)(e.file_path)),1),s("span",{class:$(["doc-status-pill",ge(Et)(e.status)])},u(ge(qt)(e.status)),3),e.upload_date?(o(),l("span",Da,"· "+u(e.upload_date),1)):v("",!0)])]),s("div",Ua,[s("a",{href:Be(e),target:"_blank",class:"btn-view"},"View",8,Ma),s("button",{class:"btn-view",onClick:i=>Oe(e)},"Comments",8,Va)])]))),128))]))])):b.value==="thesis"?(o(),l("div",Fa,[s("div",Na,[t[56]||(t[56]=s("h2",null,"Defense Window (Admin-published)",-1)),Fe.value?(o(),l("div",Ra,"Loading...")):Ne.value.length===0?(o(),l("div",Pa,"No defense windows published yet.")):(o(),l("div",ja,[t[55]||(t[55]=s("div",{class:"row header defense-row"},[s("div",null,"Year"),s("div",null,"Start"),s("div",null,"End")],-1)),(o(!0),l(y,null,h(Ne.value,e=>(o(),l("div",{key:e.year,class:"row defense-row"},[s("div",null,[s("strong",null,u(e.year),1)]),s("div",null,u(e.start_date),1),s("div",null,u(e.end_date),1)]))),128))]))]),s("div",Ea,[t[58]||(t[58]=s("h2",null,"Advisee Thesis / Project Timeline",-1)),s("div",qa,[g(s("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>Re.value=e),class:"select",type:"text",placeholder:"Search advisees..."},null,512),[[A,Re.value]]),s("button",{class:"btn-view",onClick:Je,disabled:ce.value},"Refresh",8,Ba)]),ce.value?(o(),l("div",Oa,"Loading...")):Qe.value.length===0?(o(),l("div",Ha,"No data.")):(o(),l("div",Ia,[t[57]||(t[57]=s("div",{class:"row header thesis-row"},[s("div",null,"Student"),s("div",null,"Term"),s("div",null,"Type"),s("div",null,"Submission"),s("div",null,"Defense"),s("div",null,"File"),s("div",null,"Title")],-1)),(o(!0),l(y,null,h(Qe.value,e=>(o(),l("div",{key:e.student_id,class:"row thesis-row"},[s("div",null,[s("strong",null,u(e.student_username||`#${e.student_id}`),1)]),s("div",null,[e.term_number?(o(),l("span",Wa,"Term "+u(e.term_number),1)):(o(),l("span",Ga,"-"))]),s("div",null,u(e.type||"-"),1),s("div",null,u(e.submission_date||"-"),1),s("div",null,u(e.defense_date||"-"),1),s("div",null,[e.thesis_doc_id?(o(),l("div",Ya,[s("a",{href:Be({doc_id:e.thesis_doc_id}),target:"_blank",class:"btn-view"},"View",8,za),s("button",{class:"btn-view",onClick:i=>dt(e)},"Comments",8,Ja)])):(o(),l("span",Qa,"-"))]),s("div",null,u(e.title||"-"),1)]))),128))]))])])):(o(),l("div",Za,[t[59]||(t[59]=s("h2",null,"Major Professor Requests",-1)),t[60]||(t[60]=s("p",{class:"subtitle"},"Students requesting you as their advisor.",-1)),he.value.length===0?(o(),l("div",Ka,"No new advising requests.")):(o(),l("div",Xa,[(o(!0),l(y,null,h(he.value,e=>(o(),l("div",{key:e.student_id,class:"review-item highlight-item"},[s("div",el,[s("span",tl,u(fe(e)),1),s("span",sl,u(e.email),1)]),s("div",al,[s("button",{onClick:i=>nt(e,"reject"),class:"btn-reject"},"Decline",8,ll),s("button",{onClick:i=>nt(e,"accept"),class:"btn-approve"},"Accept Student",8,ol)])]))),128))]))]))])]),Ve.value?(o(),l("div",nl,[s("div",il,[t[62]||(t[62]=s("h3",null,"Course Students",-1)),H.value?(o(),l("div",ul,[s("strong",null,u(H.value),1)])):v("",!0),s("div",dl,[g(s("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>X.value=e),class:"select",type:"text",placeholder:"Search students..."},null,512),[[A,X.value]]),s("button",{class:"btn-view",onClick:et,disabled:re.value},"Refresh",8,rl)]),I.value?(o(),l("div",{key:1,class:$(["msg",{ok:W.value,bad:!W.value}])},u(I.value),3)):v("",!0),re.value?(o(),l("div",cl,"Loading...")):Xe.value.length===0?(o(),l("div",vl,"No students found.")):(o(),l("div",ml,[t[61]||(t[61]=s("div",{class:"row header roster-row"},[s("div",null,"Student"),s("div",null,"Email"),s("div",null,"Cohort"),s("div",null,"Term")],-1)),(o(!0),l(y,null,h(Xe.value,e=>(o(),l("div",{key:e.student_id,class:"row roster-row"},[s("div",null,[s("strong",null,u(pt(e)),1)]),s("div",null,u(e.email||"-"),1),s("div",null,u(e.entry_term_code||"-"),1),s("div",null,[e.term_number?(o(),l("span",_l,"Term "+u(e.term_number),1)):(o(),l("span",pl,"-"))])]))),128))])),s("div",{class:"modal-actions"},[s("button",{class:"btn-cancel",onClick:gt},"Close")])])])):v("",!0),Ee.value?(o(),l("div",fl,[s("div",gl,[t[63]||(t[63]=s("h3",null,"Document Comments",-1)),D.value?(o(),l("div",yl,[s("div",null,[s("strong",null,u(D.value.student_username||`#${D.value.student_id}`),1),s("span",null," · "+u(D.value.doc_type)+" · doc_id="+u(D.value.doc_id),1)])])):v("",!0),s("div",hl,[qe.value?(o(),l("div",bl,"Loading comments...")):ee.value.length===0?(o(),l("div",kl,"No comments yet.")):(o(),l("div",wl,[(o(!0),l(y,null,h(ee.value,e=>(o(),l("div",{key:e.id,class:"comment-item"},[s("div",Cl,[s("span",Sl,u(e.author_username||e.author_role),1),s("span",$l,u(e.created_at),1)]),s("div",Al,u(e.comment),1)]))),128))]))]),g(s("textarea",{"onUpdate:modelValue":t[18]||(t[18]=e=>P.value=e),placeholder:"Write a comment...",rows:"4"},null,512),[[A,P.value]]),s("div",Tl,[s("button",{onClick:Dt,class:"btn-cancel"},"Close"),s("button",{onClick:Ut,class:"btn-confirm-approve",disabled:ve.value||!P.value.trim()},u(ve.value?"Posting...":"Post Comment"),9,xl)])])])):v("",!0),Te.value?(o(),l("div",Ll,[s("div",Dl,[t[64]||(t[64]=s("h3",null,"Submission Comments",-1)),x.value?(o(),l("div",Ul,[s("div",null,[s("strong",null,u(x.value.student_username||`#${x.value.student_id}`),1),s("span",null," · submission_id="+u(x.value.submission_id),1)])])):v("",!0),s("div",Ml,[xe.value?(o(),l("div",Vl,"Loading comments...")):Q.value.length===0?(o(),l("div",Fl,"No comments yet.")):(o(),l("div",Nl,[(o(!0),l(y,null,h(Q.value,e=>(o(),l("div",{key:e.id,class:"comment-item"},[s("div",Rl,[s("span",Pl,u(e.author_username||e.author_role),1),s("span",jl,u(e.created_at),1)]),s("div",El,u(e.comment),1)]))),128))]))]),g(s("textarea",{"onUpdate:modelValue":t[19]||(t[19]=e=>R.value=e),placeholder:"Write a comment...",rows:"4"},null,512),[[A,R.value]]),s("div",ql,[s("button",{onClick:xt,class:"btn-cancel"},"Close"),s("button",{onClick:Lt,class:"btn-confirm-approve",disabled:ue.value||!R.value.trim()||!x.value},u(ue.value?"Posting...":"Post Comment"),9,Bl)])])])):v("",!0),Ae.value?(o(),l("div",Ol,[s("div",Hl,[t[77]||(t[77]=s("h3",null,"Edit Assignment",-1)),C.value?(o(),l("div",{key:0,class:$(["msg",{ok:S.value,bad:!S.value}])},u(C.value),3)):v("",!0),c.value?(o(),l("div",Il,[s("div",Wl,[t[65]||(t[65]=s("label",null,"Title",-1)),g(s("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>c.value.title=e),type:"text"},null,512),[[A,c.value.title]])]),s("div",Gl,[t[66]||(t[66]=s("label",null,"Description",-1)),g(s("textarea",{"onUpdate:modelValue":t[21]||(t[21]=e=>c.value.description=e),rows:"4"},null,512),[[A,c.value.description]])]),s("div",Yl,[t[67]||(t[67]=s("label",null,"Due At",-1)),g(s("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>c.value.due_at=e),type:"datetime-local"},null,512),[[A,c.value.due_at]])]),s("div",zl,[t[71]||(t[71]=s("label",null,"Target",-1)),g(s("select",{"onUpdate:modelValue":t[23]||(t[23]=e=>c.value.target_mode=e)},[t[68]||(t[68]=s("option",{value:"all"},"All Students",-1)),s("option",{value:"course",disabled:!j.value||F.value.length===0},"Course",8,Jl),t[69]||(t[69]=s("option",{value:"cohort",disabled:""},"Cohort (Legacy)",-1)),t[70]||(t[70]=s("option",{value:"students"},"Specific Students",-1))],512),[[V,c.value.target_mode]])]),c.value.target_mode==="cohort"?(o(),l("div",Ql,[t[72]||(t[72]=s("label",null,"Cohort Term Code (legacy)",-1)),s("input",{value:c.value.cohort_term_code||"",type:"text",disabled:""},null,8,Zl)])):v("",!0),c.value.target_mode==="course"?(o(),l("div",Kl,[t[74]||(t[74]=s("label",null,"Course",-1)),g(s("select",{"onUpdate:modelValue":t[24]||(t[24]=e=>c.value.course_code=e),class:"select",disabled:!j.value||F.value.length===0},[t[73]||(t[73]=s("option",{disabled:"",value:""},"-- Select course --",-1)),(o(!0),l(y,null,h(F.value,e=>(o(),l("option",{key:e.course_code,value:e.course_code},u(e.course_code)+u(e.course_name?` · ${e.course_name}`:""),9,eo))),128))],8,Xl),[[V,c.value.course_code]])])):v("",!0),c.value.target_mode==="students"?(o(),l("div",to,[t[75]||(t[75]=s("label",null,"Students",-1)),g(s("select",{"onUpdate:modelValue":t[25]||(t[25]=e=>c.value.student_ids=e),multiple:"",class:"multi"},[(o(!0),l(y,null,h(Ce.value,e=>(o(),l("option",{key:e.student_id,value:String(e.student_id)},u(e.username)+" "+u(e.entry_term_code?`· ${e.entry_term_code}`:""),9,so))),128))],512),[[V,c.value.student_ids]]),t[76]||(t[76]=s("div",{class:"hint"},"Hold Ctrl/Cmd to select multiple.",-1))])):v("",!0)])):v("",!0),s("div",ao,[s("button",{class:"btn-cancel",onClick:st,disabled:J.value},"Cancel",8,lo),s("button",{class:"btn-confirm-approve",onClick:Ct,disabled:J.value||!c.value},u(J.value?"Saving...":"Save"),9,oo)])])])):v("",!0)]))}},co=Vt(no,[["__scopeId","data-v-42eaf6a6"]]);export{co as default};
