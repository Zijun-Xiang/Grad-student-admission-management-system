import{_ as P,r as f,l as i,w as R,o as W,s as j,c,a as s,d as q,z as A,n as C,b as G,t as D,F as T,f as V,k as v}from"./index-CqwOMfHx.js";const H=["onKeydown"],J=["value","placeholder","disabled"],Q={key:0,class:"dp-pop"},X={class:"dp-head"},Z={class:"title"},ee={class:"dow"},te={class:"grid"},ae=["disabled","onClick"],ne={class:"num"},se={__name:"DatePicker",props:{modelValue:{type:String,default:""},locale:{type:String,default:"en-US"},placeholder:{type:String,default:"YYYY-MM-DD"},min:{type:String,default:""},max:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m,{emit:Y}){const u=m,g=Y,b=f(null),d=f(!1),p=e=>{if(!e)return null;const t=new Date(e+"T00:00:00");return isNaN(t.getTime())?null:t},w=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${n}`},x=i(()=>p(u.modelValue)),F=i(()=>p(u.min)),B=i(()=>p(u.max)),y=new Date,r=f(y.getFullYear()),o=f(y.getMonth());R(()=>u.modelValue,e=>{const t=p(e);t&&(r.value=t.getFullYear(),o.value=t.getMonth())},{immediate:!0});const I=i(()=>u.modelValue||""),L=i(()=>new Date(r.value,o.value,1).toLocaleString(u.locale,{month:"long",year:"numeric"})),N=i(()=>{const e=new Intl.DateTimeFormat(u.locale,{weekday:"short"}),t=new Date(Date.UTC(2024,0,7)),a=[];for(let n=0;n<7;n++){const l=new Date(t.getTime()+n*24*60*60*1e3);a.push(e.format(l))}return a}),$=i(()=>{const t=new Date(r.value,o.value,1).getDay(),a=new Date(r.value,o.value+1,0).getDate(),n=[];for(let l=0;l<t;l++)n.push({day:"",date:null});for(let l=1;l<=a;l++)n.push({day:l,date:new Date(r.value,o.value,l)});for(;n.length%7!==0;)n.push({day:"",date:null});return n}),_=(e,t)=>e&&t&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),h=e=>{if(!e)return!1;const t=F.value,a=B.value;return!!(t&&e.getTime()<t.getTime()||a&&e.getTime()>a.getTime())},k=e=>e.date?{today:_(e.date,y),selected:_(e.date,x.value),disabled:h(e.date)}:"empty",E=()=>{o.value===0?(o.value=11,r.value-=1):o.value-=1},K=()=>{o.value===11?(o.value=0,r.value+=1):o.value+=1},O=e=>{e!=null&&e.date&&(h(e.date)||(g("update:modelValue",w(e.date)),d.value=!1))},U=()=>{const e=new Date;h(e)||(g("update:modelValue",w(e)),d.value=!1)},z=()=>{g("update:modelValue",""),d.value=!1},S=()=>{u.disabled||(d.value=!d.value)},M=e=>{if(!d.value)return;const t=b.value;t&&(e!=null&&e.target&&t.contains(e.target)||(d.value=!1))};return W(()=>document.addEventListener("mousedown",M)),j(()=>document.removeEventListener("mousedown",M)),(e,t)=>(v(),c("div",{ref_key:"root",ref:b,class:"dp"},[s("div",{class:C(["dp-input",{disabled:m.disabled}]),onClick:S,role:"button",tabindex:"0",onKeydown:A(G(S,["prevent"]),["enter"])},[s("input",{value:I.value,placeholder:m.placeholder,readonly:"",disabled:m.disabled},null,8,J),t[0]||(t[0]=s("span",{class:"dp-icon","aria-hidden":"true"},"ðŸ“…",-1))],42,H),d.value?(v(),c("div",Q,[s("div",X,[s("button",{class:"nav",type:"button",onClick:E},"<"),s("div",Z,D(L.value),1),s("button",{class:"nav",type:"button",onClick:K},">")]),s("div",ee,[(v(!0),c(T,null,V(N.value,a=>(v(),c("div",{key:a,class:"dow-cell"},D(a),1))),128))]),s("div",te,[(v(!0),c(T,null,V($.value,(a,n)=>(v(),c("button",{key:n,class:C(["cell",k(a)]),type:"button",disabled:!a.date||k(a).disabled,onClick:l=>O(a)},[s("span",ne,D(a.day),1)],10,ae))),128))]),s("div",{class:"dp-actions"},[s("button",{class:"btn-link",type:"button",onClick:U},"Today"),s("button",{class:"btn-link",type:"button",onClick:z},"Clear")])])):q("",!0)],512))}},le=P(se,[["__scopeId","data-v-e782165b"]]);export{le as D};
