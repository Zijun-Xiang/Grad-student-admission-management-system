{"remainingRequest":"C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\src\\components\\updateInfo.vue?vue&type=style&index=0&id=2f5d6fa7&scope=true&lang=css","dependencies":[{"path":"C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\src\\components\\updateInfo.vue","mtime":1742524580000},{"path":"C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1742524560000},{"path":"C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1742524580000},{"path":"C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1742524572000},{"path":"C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742524558000},{"path":"C:\\BaiduFiles\\R031-StudentInfoManager\\源代码\\StudentInfoManager\\StudentInfoManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1742524580000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgouZWwtY2FyZF9fYm9keXsKICB3aWR0aDogMTAwJTsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgCiAganVzdGlmeS1pdGVtczogY2VudGVyOwp9Ci5lbC1mb3JtewogIHdpZHRoOiAxMDAlOwp9Ci5lbC1mb3JtLWl0ZW1fX2xhYmVsewogIGZvbnQtZmFtaWx5OidIYXJtb255T1NfU2FucychaW1wb3J0YW50ICA7CiAgZm9udC1zaXplOiAxNXB4IWltcG9ydGFudDsKICBjb2xvcjogYmxhY2sgIWltcG9ydGFudDsKICB3aWR0aDogMTAwJTsKfQo="},{"version":3,"sources":["updateInfo.vue"],"names":[],"mappings":";;AA0BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"updateInfo.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-container>\n    <el-main style=\"width: 60%; display: flex;flex-direction: column;align-items: center;align-content: center; \">\n      <el-card style=\"padding: 20px;width:60%;display: flex;flex-direction: column;align-items: center;align-content: center; \">\n        <span style=\"width: 100%;;font-family:'HarmonyOS_Sans'  ;text-align: center;font-size: 30px;margin-bottom: 30px;font-weight: bolder;color: black;\">个人信息修改</span>\n        <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\" label-position=\"left\">\n          <el-form-item  label=\"姓名：\" prop=\"name\">\n            <el-input v-model=\"ruleForm.name\" :value=\"ruleForm.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"新密码：\" prop=\"pass\">\n            <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认密码：\" prop=\"checkPass\">\n            <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交</el-button>\n            <el-button @click=\"resetForm('ruleForm')\" type=\"warning\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </el-main>\n  </el-container>\n</template>\n<style scope>\n\n.el-card__body{\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  \n  justify-items: center;\n}\n.el-form{\n  width: 100%;\n}\n.el-form-item__label{\n  font-family:'HarmonyOS_Sans'!important  ;\n  font-size: 15px!important;\n  color: black !important;\n  width: 100%;\n}\n</style>\n<script>\nexport default {\n  data() {\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (this.ruleForm.checkPass !== '') {\n          this.$refs.ruleForm.validateField('checkPass');\n        }\n        callback();\n      }\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== this.ruleForm.pass) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      ruleForm: {\n        pass: '',\n        checkPass: '',\n        name: sessionStorage.getItem('name')\n      },\n      rules: {\n        pass: [\n          { validator: validatePass, trigger: 'blur' }\n        ],\n        checkPass: [\n          { validator: validatePass2, trigger: 'blur' }\n        ],\n        name: [\n          { require: true, message: '名字不能为空', trigger: 'blur'}\n        ]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          const that = this\n          sessionStorage.setItem('name', that.ruleForm.name)\n          const type = sessionStorage.getItem('type')\n          let form = null\n          let ss = null\n          if (type === 'student') {\n            ss = 'Student'\n            form = {\n              sid: sessionStorage.getItem('sid'),\n              sname: that.ruleForm.name,\n              password: that.ruleForm.pass,\n            }\n          }\n          else {\n            ss = 'Teacher'\n            form = {\n              tid: sessionStorage.getItem('tid'),\n              tname: that.ruleForm.name,\n              password: that.ruleForm.pass,\n            }\n          }\n\n          axios.post('http://localhost:9451/' + type + '/update' + ss, form).then(function (resp) {\n            if (resp.data === true) {\n              that.$message({\n                showClose: true,\n                message: '编辑成功',\n                type: 'success'\n              });\n            }\n            else {\n              that.$message.error('编辑失败，联系管理员');\n            }\n            that.$router.push(\"/\" + type + 'Home')\n          })\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n}\n</script>"]}]}